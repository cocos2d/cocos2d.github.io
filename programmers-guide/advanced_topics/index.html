<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="The Cocos Team">
        <link rel="canonical" href="http://cocos2d-x.org/docs/programmers-guide/advanced_topics/index.html">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Advanced Topics - Cocos Documentation</title>

  <link href="../../css/bootstrap-custom.css" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
<link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
<link href="../../css/base.css" rel="stylesheet">
<link href="../../css/cinder.css" rel="stylesheet">
<link href="../../css/pg.css" rel="stylesheet">
<link href="../../css/highlight.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-3216502-3', 'Cocos2d-x.org');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a style="padding: 12px 0px;" class="navbar-brand" href="../../index.html">Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../index.html">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Manual Installations</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../installation/A/index.html">Prerequisites</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Android-terminal/index.html">Android Command-line Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Android-VisualStudio/index.html">Android Visual Studio Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Android-Studio/index.html">Android Studio Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Android-Eclipse/index.html">Android Eclipse Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/iOS/index.html">IOS and OSX Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Linux/index.html">Linux Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Tizen/index.html">Tizen Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Windows/index.html">Windows Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../installation/Windows-Phone/index.html">Windows Phone Setup</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Programmers Guide</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../about/index.html">About Cocos2d-x</a>
  </li>
  

          
              
  
  <li >
      <a href="../basic_concepts/index.html">Basic Concepts</a>
  </li>
  

          
              
  
  <li >
      <a href="../sprites/index.html">Sprites</a>
  </li>
  

          
              
  
  <li >
      <a href="../actions/index.html">Actions</a>
  </li>
  

          
              
  
  <li >
      <a href="../scenes/index.html">Scenes</a>
  </li>
  

          
              
  
  <li >
      <a href="../ui_components/index.html">UI</a>
  </li>
  

          
              
  
  <li >
      <a href="../other_node_types/index.html">Other Node Types</a>
  </li>
  

          
              
  
  <li >
      <a href="../event_dispatch/index.html">Event Dispatch</a>
  </li>
  

          
              
  
  <li >
      <a href="../3d/index.html">3D</a>
  </li>
  

          
              
  
  <li >
      <a href="../scripting/index.html">Scripting</a>
  </li>
  

          
              
  
  <li >
      <a href="../physics/index.html">Physics</a>
  </li>
  

          
              
  
  <li >
      <a href="../audio/index.html">Audio</a>
  </li>
  

          
              
  
  <li >
      <a href="../vr/index.html">VR</a>
  </li>
  

          
              
  
  <li class="active">
      <a href="index.html">Advanced Topics</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Editors & Tools</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../editors_and_tools/cocosCLTool/index.html">Command-line tool</a>
  </li>
  

          
              
  
  <li >
      <a href="../../editors_and_tools/creator/index.html">Cocos Creator</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
  
  <li >
      <a href="../../editors_and_tools/cocos/index.html">Cocos Launcher</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Services</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../services/sdkbox/index.html">SDKBOX</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Tutorials</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../tutorials/javascript/javascript/index.html">Parkour Game Tutorials for Cocos2d-JS</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
      </ul>
    </li>
  

                        
                            
  
  <li >
      <a href="../../api-ref/index.html">API Reference</a>
  </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Deprecated</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../deprecated/studio/index.html">Cocos Studio</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
      </ul>
    </li>
  

                        
                        </ul>
                    </li>
                
                

                <!-- new add for language button -->
                <!--<li>
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>-->

                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <!-- 
                    <li >
                        <a rel="next" href="../vr/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../editors_and_tools/cocosCLTool/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                 -->
                
                    <li>
                        <a href="https://github.com/chukong/cocos-docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
              
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
      
        
          <li class="main active"><a href="#advanced-topics">Advanced Topics</a></li>

          

        
      
    
      
        
          <li class="main "><a href="#file-system-access">File System Access</a></li>

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#functions-to-read-file-content">Functions to read file content</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#functions-to-manage-files-or-directories">Functions to manage files or directories</a></li>
              

          

        
      
    
      
        
          <li class="main "><a href="#networking-with-http">Networking with HTTP</a></li>

          

        
      
    
      
        
          <li class="main "><a href="#shaders-and-materials">Shaders and Materials</a></li>

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#what-is-a-shader">What is a Shader</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#customizing-shaders">Customizing Shaders</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#what-is-a-material">What is a Material</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#techniques">Techniques</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#passes">Passes</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#material-file-format-in-detail">Material file format in detail</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#predefined-uniforms">Predefined uniforms</a></li>
              

          

        
      
    
      
        
          <li class="main "><a href="#how-to-optimize-the-graphics-performance-of-your-cocos2d-x-games">How to optimize the graphics performance of your Cocos2d-x games</a></li>

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#golden-rules">Golden rules</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#common-bottlenecks">Common Bottlenecks</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#simple-checklist-to-make-your-cocos2d-x-game-faster">Simple checklist to make your Cocos2d-x game faster</a></li>
              

          

        
      
    
    </ul>
</div></div>
              
                <div class="col-md-9" role="main">

<!-- bread crumb trail -->
<ol class="breadcrumb">
<li><a href="../../index.html">Docs</a></li>

  
    
      <li>Contents</li>
    
  
    
      <li>Programmers Guide</li>
    
  

<li>Advanced Topics</li>
</ol>

<!-- previous/next buttons for everything but the home page -->

<ul class="nav navbar-nav navbar-right">
    
        <li >
            <a rel="next" href="../vr/index.html">
                <i class="fa fa-arrow-left"></i> Previous
            </a>
        </li>
        <li >
            <a rel="prev" href="../../editors_and_tools/cocosCLTool/index.html">
                Next <i class="fa fa-arrow-right"></i>
            </a>
        </li>
    
</ul>


<!-- we can put this here if we want it on all content pages, but we don't at this point -->
<!--<div class="langs">
  <ul>
    <li><a href="#" id="tab-cpp">C++</a></li>
    <li><a href="#" id="tab-js">Javascript</a></li>-->
    <!--<li><a href="#" id="tab-lua">Lua</a></li>-->
  <!--</ul>
</div>-->

<h1 id="advanced-topics">Advanced Topics</h1>
<p>Wow! You are on the last chapter. Good Job! By now you should feel comfortable
creating your games with Cocos2d-x. However, please realize there is no limit to
what you can create. This chapter covers <strong>advanced</strong> concepts. Note that this
chapter gets more technical in its content and format.</p>
<h1 id="file-system-access">File System Access</h1>
<p>Even though you can use functions in <strong>stdio.h</strong> to access files it can be
inconvenient for a few reasons:
<em> You need to invoke system specific API to get full path of a file.
</em> Resources are packed into .apk file on Android after installing.
* You want to load a resource (such as a picture) based on resolution automatically.</p>
<p>The <code>FileUtils</code> class has been created to resolve these issues. <code>FileUtils</code> is a
helper class to access files under the location of your <code>Resources</code> directory.
This includes reading data from a file and checking file existence.</p>
<h3 id="functions-to-read-file-content">Functions to read file content</h3>
<p>These functions will read different type of files and will return different data
types:</p>
<table>
 <tr>
  <th>function name</th>
  <th>return type</th>
  <th>support path type</th>
 </tr>
 <tr>
  <td>getStringFromFile</td>
  <td>std::string</td>
  <td>relative path and absolute path</td>
 </tr>
 <tr>
  <td>getDataFromFile</td>
  <td>cocos2d::Data</td>
  <td>relative path and absolute path</td>
 </tr>
 <tr>
  <td>getFileDataFromZip</td>
  <td>unsigned char*</td>
  <td>absolute path</td>
 </tr>
 <tr>
  <td>getValueMapFromFile</td>
  <td>cocos2d::ValueMap</td>
  <td>relative path and absolute path</td>
 </tr>
 <tr>
  <td>getValueVectorFromFile</td>
  <td>std::string</td>
  <td>cocos2d::ValueVector</td>
 </tr>

 </table>

<h3 id="functions-to-manage-files-or-directories">Functions to manage files or directories</h3>
<p>These functions will manage a file or a directory:</p>
<table>
 <tr>
  <th>function name</th>
  <th>support path type</th>
 </tr>
 <tr>
  <td>isFileExist</td>
  <td>relative path and absolute path</td>
 </tr>
 <tr>
  <td>isDirectoryExist</td>
  <td>relative path and absolute path</td>
 </tr>
 <tr>
  <td>createDirectory</td>
  <td>absolute path</td>
 </tr>
 <tr>
  <td>removeDirectory</td>
  <td>absolute path</td>
 </tr>
 <tr>
  <td>removeFile</td>
  <td>absolute path</td>
 </tr>
 <tr>
  <td>renameFile</td>
  <td>absolute path</td>
 </tr>
 <tr>
  <td>getFileSize</td>
  <td>relative path and absolute path</td>
 </tr>
 </table>

<h1 id="networking-with-http">Networking with HTTP</h1>
<p>Sometimes it might be helpful to obtain resources or data from another source.
One common way of doing this is by using an <code>HTTP</code> request.</p>
<p>HTTP networking has three steps:
   1. Create an <code>HttpRequest</code>
   2. Create a <strong>setResponseCallback()</strong> callback function for replying to requests.
   3. Send <code>HttpRequest</code> by <code>HttpClient</code></p>
<p><code>HttpRequest</code> can have four types:  <strong>POST</strong>, <strong>PUT</strong>, <strong>DELETE</strong>, <strong>UNKNOWN</strong>. Unless
specified the default type is <strong>UNKNOWN</strong>. The <code>HTTPClient</code> object controls sending the
<strong>request</strong> and receiving the data on a <strong>callback</strong>.</p>
<p>Working with an <code>HTTPRequest</code> is quite simple:</p>
<pre><code class="cpp">HttpRequest* request = new (std :: nothrow) HttpRequest();
request-&gt;setUrl(&quot;http://just-make-this-request-failed.com&quot;);
request-&gt;setRequestType(HttpRequest::Type::GET);
request-&gt;setResponseCallback(CC_CALLBACK_2 (HttpClientTest::onHttpRequestCompleted, this));

HttpClient::getInstance()-&gt;sendImmediate(request);

request-&gt;release();
</code></pre>

<p>Notice that we specified a <strong>setResponseCallback()</strong> method for when a response is
received. By doing this we can look at the data returned and use it how we might
need to. Again, this process is simple and we can do it with ease:</p>
<pre><code class="cpp">void HttpClientTest::onHttpRequestCompleted(HttpClient* sender, HttpResponse* response)
{
  if (!response)
  {
    return;
  }

  // Dump the data
  std::vector&lt;char&gt;* buffer = response-&gt;getResponseData();

  for (unsigned int i = 0; i &lt;buffer-&gt; size (); i ++)
  {
    log (&quot;% c&quot;, (* buffer) [i]);
  }
}
</code></pre>

<h1 id="shaders-and-materials">Shaders and Materials</h1>
<h2 id="what-is-a-shader">What is a Shader</h2>
<p>From wikipedia:</p>
<p><strong>In the field of computer graphics, a shader is a computer program that is used
to do shading: the production of appropriate levels of color within an image,
or, in the modern era, also to produce special effects or do video post-processing.
A definition in layman's terms might be given as "a program that tells a computer
how to draw something in a specific and unique way".</strong></p>
<p>In other words, it is a piece of code that runs on the GPU (not CPU) to draw the
different Cocos2d-x Nodes.</p>
<p>Cocos2d-x uses the <a href="https://www.khronos.org/opengles/">OpenGL ES Shading Language v1.0</a>
for the shaders. But describing the GLSL language is outside the scope of this
document. In order to learn more about the language, please refer to:
<a href="https://www.khronos.org/files/opengles_shading_language.pdf">OpenGL ES Shading Language v1.0 Spec</a>.</p>
<p>In Cocos2d-x, all <code>Node</code> objects that are <strong>renderable</strong> use shaders. As an example
<code>Sprite</code> uses optimized shaders for 2d sprites, <code>Sprite3D</code> uses optimized shaders
for 3d objects, and so on.</p>
<h2 id="customizing-shaders">Customizing Shaders</h2>
<p>Users can change the predefined shaders from any Cocos2d-x <code>Node</code> by calling:</p>
<pre><code class="c++">sprite-&gt;setGLProgramState(programState);
sprite3d-&gt;setGLProgramState(programState);
</code></pre>

<p>The <code>GLProgramState</code> object contains two important things:</p>
<ul>
<li>A <code>GLProgram</code>: Basically this is <em>the</em> shader. It contains a vertex and fragment shader.</li>
<li>And the <strong>state</strong>, which basically are the uniforms of the shader.</li>
</ul>
<p>In case you are not familiar with the term <em>uniform</em> and why it is needed, please
refer to the <a href="https://www.khronos.org/files/opengles_shading_language.pdf">OpenGL Shading Language Specification</a></p>
<p>Setting uniforms to a <code>GLProgramState</code> is as easy as this:</p>
<pre><code class="c++">glProgramState-&gt;setUniformFloat(&quot;u_progress&quot;, 0.9);
glProgramState-&gt;setUniformVec2(&quot;u_position&quot;, Vec2(x,y));
glProgramState-&gt;setUniformMat4(&quot;u_transform&quot;, matrix);
</code></pre>

<p>You can even set callbacks as a uniform value:</p>
<pre><code class="c++">glProgramState-&gt;setUniformCallback(&quot;u_progress&quot;, [](GLProgram* glProgram, Uniform* uniform)
  {
      float random = CCRANDOM_0_1();
      glProgram-&gt;setUniformLocationWith1f(uniform-&gt;location, random);
  }
);
</code></pre>

<p>And although it is possible to set <code>GLProgramState</code> objects manually, an easier
way to do it is by using <code>Material</code> objects.</p>
<h2 id="what-is-a-material">What is a Material</h2>
<p>Assume that you want to draw a sphere like this one:</p>
<p><img alt="" src="../advanced_topics-img/model.jpg" /></p>
<p>The first thing that you have to do is to define its geometry, something like this:</p>
<p><img alt="" src="../advanced_topics-img/geometry.jpg" /></p>
<p>...and then define the brick texture, like:</p>
<p><img alt="" src="../advanced_topics-img/brick.jpg" /></p>
<ul>
<li>But what if you want to use a lower quality texture when the sphere is far away
from the camera?</li>
<li>or what if you want to apply a blur effect to the bricks?</li>
<li>or what if you want to enable or disable lighting in the sphere ?</li>
</ul>
<p>The answer is to use a <code>Material</code> instead of just a plain and simple texture. In fact,
with <code>Material</code> you can have more than one texture, and much more features like multi-pass rendering.</p>
<p><code>Material</code> objects are created from <code>.material</code> files, which contain the following information:</p>
<ul>
<li><code>Material</code> can have one or more <code>Technique</code> objects</li>
<li>each <code>Technique</code> can have one more <code>Pass</code> objects</li>
<li>each <code>Pass</code> object has:</li>
<li>a <code>RenderState</code> object,</li>
<li>a <code>Shader</code> object including the uniforms</li>
</ul>
<p>As an example, this is how a material file looks like:</p>
<pre><code class="javascript">// A &quot;Material&quot; file can contain one or more materials
material spaceship
{
    // A Material contains one or more Techniques.
    // In case more than one Technique is present, the first one will be the default one
    // A &quot;Technique&quot; describes how the material is going to be renderer
    // Techniques could:
    //  - define the render quality of the model: high quality, low quality, etc.
    //  - lit or unlit an object
    // etc...
    technique normal
    {
        // A technique can contain one or more passes
        // A &quot;Pass&quot; describes the &quot;draws&quot; that will be needed
        //   in order to achieve the desired technique
        // The 3 properties of the Passes are shader, renderState and sampler
        pass 0
        {
            // shader: responsible for the vertex and frag shaders, and its uniforms
            shader
            {
                vertexShader = Shaders3D/3d_position_tex.vert
                fragmentShader = Shaders3D/3d_color_tex.frag

                // uniforms, including samplers go here
                u_color = 0.9,0.8,0.7
                // sampler: the id is the uniform name
                sampler u_sampler0
                {
                    path = Sprite3DTest/boss.png
                    mipmap = true
                    wrapS = CLAMP
                    wrapT = CLAMP
                    minFilter = NEAREST_MIPMAP_LINEAR
                    magFilter = LINEAR
                }
            }
            // renderState: responsible for depth buffer, cullface, stencil, blending, etc.
            renderState
            {
                cullFace = true
                cullFaceSide = FRONT
                depthTest = true
            }
        }
    }
}
</code></pre>

<p>And this is how to set a <code>Material</code> to a <code>Sprite3D</code>:</p>
<pre><code class="c++">Material* material = Material::createWithFilename(&quot;Materials/3d_effects.material&quot;);
sprite3d-&gt;setMaterial(material);
</code></pre>

<p>And if you want to change between different <code>Technique</code>s, you have to do:</p>
<pre><code class="c++">material-&gt;setTechnique(&quot;normal&quot;);
</code></pre>

<h2 id="techniques">Techniques</h2>
<p>Since you can bind only one <code>Material</code> per <code>Sprite3D</code>, an additional feature
is supported that's designed to make it quick and easy to change the way you
render the parts at runtime. You can define multiple techniques by giving them
different names. Each one can have a completely different rendering technique,
and you can even change the technique being applied at runtime by using
<strong>Material::setTechnique(const std::string&amp; name)</strong>. When a material is loaded,
all the techniques are loaded ahead too. This is a practical way of handling
different light combinations or having lower-quality rendering techniques, such
as disabling bump mapping, when the object being rendered is far away from the
camera.</p>
<h2 id="passes">Passes</h2>
<p>A <code>Technique</code> can have one or more <strong>passes</strong> That is, multi-pass rendering.
And each <code>Pass</code> has two main objects:</p>
<ul>
<li><code>RenderState</code>: contains the GPU state information, like <strong>depthTest</strong>, <strong>cullFace</strong>,
    <strong>stencilTest</strong>, etc.</li>
<li><code>GLProgramState</code>: contains the shader (<code>GLProgram</code>) that is going to be used, including
    its uniforms.</li>
</ul>
<h2 id="material-file-format-in-detail">Material file format in detail</h2>
<p>Material uses a file format  optimized to create Material files.
This file format is very similar to other existing Material file formats, like
GamePlay3D's and OGRE3D's.</p>
<p><strong>Notes</strong>:</p>
<ul>
<li>Material file extensions do not matter. Although it is recommended to use
<strong>.material</strong> as extension</li>
<li><strong>id</strong> is optional for material, technique and pass</li>
<li>Materials can inherit values from another material by optionally setting a
<strong>parent_material_id</strong></li>
<li>Vertex and fragment shader file extensions do not matter. The convention in
Cocos2d-x is to use <strong>.vert</strong> and <strong>frag</strong></li>
</ul>
<pre><code class="c++">// When the .material file contains one material
sprite3D-&gt;setMaterial(&quot;Materials/box.material&quot;);
// When the .material file contains multiple materials
sprite3D-&gt;setMaterial(&quot;Materials/circle.material#wood&quot;);
</code></pre>

<table>
 <tr>
  <td><a name=material>material</a> <span class=Non-literal><span style='font-family:"Courier New"'>material_id</span></span> : <span class=Non-literal><span style='font-family:"Courier New"'>parent_material_id</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  renderState {}</td>
  <td>[0..1]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>  technique <span class=Non-literal><span style='font-family: "Courier New"'>id </span></span>{}</td>
  <td>[0..*]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

<table>
 <tr>
  <td><a name=technique>technique</a> <span class=Non-literal><span style='font-family:"Courier New"'>technique_id</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  renderState {}</td>
  <td>[0..1]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>  pass <span class=Non-literal><span style='font-family:"Courier New"'>id </span></span>{}</td>
  <td>[0..*]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

<table>
 <tr>
  <td><a name=pass>pass </a><span class=Non-literal><span style='font-family:"Courier New"'>pass_id</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  renderState {}</td>
  <td>[0..1]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>  shader {}</td>
  <td>[0..1]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

<table>
 <tr>
  <td><a name=renderState>renderState</a></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  blend = <span class=Non-literal><span style='font-family: "Courier New"'>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>  blendSrc = <a href="#BLEND_ENUM">BLEND_ENUM</a></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>  blendDst = <a href="#BLEND_ENUM">BLEND_ENUM</a></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>  cullFace = <span class=Non-literal><span style='font-family: "Courier New"'>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>  depthTest = <span class=Non-literal><span style='font-family: "Courier New"'>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>  depthWrite = <span class=Non-literal><span style='font-family: "Courier New"'>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>&nbsp; frontFace = <span class="Non-literal"><span>CW | CCW</span></span></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>&nbsp; depthTest = <span class="Non-literal"><span>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>&nbsp; depthWrite = <span class="Non-literal"><span>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>&nbsp; depthFunc = <a href="#wiki-FUNC_ENUM">FUNC_ENUM</a></td>
  <td>[0..1]</td>
  <td>enum</td>
  </tr>
 <tr>
  <td>&nbsp; stencilTest = <span class="Non-literal"><span>false</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>&nbsp; stencilWrite = <span class="Non-literal"><span>4294967295</span></span></td>
  <td>[0..1]</td>
  <td>uint</td>
 </tr>
<tr>
<td>&nbsp; stencilFunc = <a href="#wiki-FUNC_ENUM">FUNC_ENUM</a></td>
<td>[0..1]</td>
<td>enum</td>
</tr>
<tr>
<td>&nbsp; stencilFuncRef = <span class="Non-literal"><span>0</span></span></td>
<td>[0..1]</td>
<td>int</td>
</tr>
<tr>
<td>&nbsp; stencilFuncMask = <span class="Non-literal"><span>4294967295</span></span></td>
<td>[0..1]</td>
<td>uint</td>
</tr>
<tr>
<td>&nbsp; stencilOpSfail = <a href="#wiki-STENCIL_OP_ENUM">STENCIL_OPERATION_ENUM</a></td>
<td>[0..1]</td>
<td>enum</td>
</tr>
<tr>
<td>&nbsp; stencilOpDpfail = <a href="#wiki-STENCIL_OP_ENUM">STENCIL_OPERATION_ENUM</a> </td>
<td>[0..1]</td>
<td>enum</td>
</tr>
<tr>
<td>&nbsp; stencilOpDppass = <a href="#wiki-STENCIL_OP_ENUM">STENCIL_OPERATION_ENUM</a></td>
<td>[0..1]</td>
<td>enum</td>
</tr>
</table>

<table>
 <tr>
  <td><a name=shader>shader</a><span class=Non-literal><span style='font-family:"Courier New"'>shader_id</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  vertexShader = <span class=Non-literal><span style='font-family:"Courier New"'>res/colored.vert</span></span></td>
  <td>[0..1]</td>
  <td>file path</td>
 </tr>
 <tr>
  <td>  fragmentShader = <span class=Non-literal><span style='font-family:"Courier New"'>res/colored.frag</span></span></td>
  <td>[0..1]</td>
  <td>file path</td>
 </tr>
 <tr>
  <td>  defines = <span class=Non-literal><span style='font-family: "Courier New"'>semicolon separated list</span></span></td>
  <td>[0..1]</td>
  <td>string</td>
 </tr>
 <tr>
  <td><span class=Non-literal><span style='font-family:"Courier New"'>&nbsp;</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td><span class=Non-literal><span style='font-family:"Courier New"'>  uniform_name </span></span>=<span class=Non-literal><span style='font-family: "Courier New"'> </span></span><a href="#scalar">scalar</a><span class=Non-literal><span style='font-family:"Courier New"'> | </span></span><a href="#vector">vector</a></td>
  <td>[0..*]</td>
  <td>uniform</td>
 </tr>
 <tr>
  <td>  <span class=Non-literal><span style='font-family:"Courier New"'>uniform_name </span></span>= <a href="#AUTO_BIND_ENUM">AUTO_BIND_ENUM</a></td>
  <td>[0..*]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>  sampler <span class=Non-literal><span style='font-family: "Courier New"'>uniform_name </span></span>{}</td>
  <td>[0..*]</td>
  <td>block</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

<table>
 <tr>
  <td><a name=sampler>sampler</a> <span class=Non-literal><span style='font-family:"Courier New"'>uniform_name</span></span></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>{</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>  path = <span class=Non-literal><span style='font-family:"Courier New"'>res/wood.png | @wood</span></span></td>
  <td>[0..1]</td>
  <td>image path</td>
 </tr>
 <tr>
  <td>  mipmap = <span class=Non-literal><span style='font-family: "Courier New"'>bool</span></span></td>
  <td>[0..1]</td>
  <td>bool</td>
 </tr>
 <tr>
  <td>  wrapS = <span class=Non-literal><span style='font-family: "Courier New"'>REPEAT | CLAMP</span></span></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>  wrapT = <span class=Non-literal><span style='font-family: "Courier New"'>REPEAT | CLAMP</span></span></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td> minFilter = <a href="#TEXTURE_MIN_FILTER_ENUM">TEXTURE_MIN_FILTER_ENUM</a></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>  magFilter = <a href="#TEXTURE_MAG_FILTER_ENUM">TEXTURE_MAG_FILTER_ENUM</a></td>
  <td>[0..1]</td>
  <td>enum</td>
 </tr>
 <tr>
  <td>}</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
 </tr>
</table>

<p><strong>Enums</strong>:</p>
<table>
 <tr>
  <th align="left"><a name="TEXTURE_MIN_FILTER_ENUM"></a><b>TEXTURE_MIN_FILTER_ENUM</b></th>
  <th>&nbsp;</th>
 </tr>
 <tr>
  <td>NEAREST</td>
  <td>Lowest quality non-mipmapped</td>
 </tr>
 <tr>
  <td>LINEAR</td>
  <td>Better quality non-mipmapped</td>
 </tr>
 <tr>
  <td>NEAREST_MIPMAP_NEAREST</td>
  <td>Fast but low quality mipmapping</td>
 </tr>
 <tr>
  <td>LINEAR_MIPMAP_NEAREST</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>NEAREST_MIPMAP_LINEAR</td>
  <td>&nbsp;</td>
 </tr>
 <tr>
  <td>LINEAR_MIPMAP_LINEAR</td>
  <td>Best quality mipmapping</td>
 </tr>
</table>

<table>
 <tr>
  <th align="left"><a name="TEXTURE_MAG_FILTER_ENUM"></a><b>TEXTURE_MAG_FILTER_ENUM</b></th>
  <th>&nbsp;</th>
 </tr>
 <tr>
  <td>NEAREST</td>
  <td>Lowest quality</td>
 </tr>
 <tr>
  <td>LINEAR</td>
  <td>Better quality</td>
 </tr>
</table>

<table>
 <tr>
  <th align="left"><a name="BLEND_ENUM"></a><b>BLEND_ENUM</b></th>
  <th>&nbsp;</th>
 </tr>
 <tr>
  <td>ZERO</td>
  <td>ONE_MINUS_DST_ALPHA</td>
 </tr>
 <tr>
  <td>ONE</td>
  <td>CONSTANT_ALPHA</td>
 </tr>
 <tr>
  <td>SRC_ALPHA</td>
  <td>ONE_MINUS_CONSTANT_ALPHA</td>
 </tr>
 <tr>
  <td>ONE_MINUS_SRC_ALPHA</td>
  <td>SRC_ALPHA_SATURATE</td>
 </tr>
 <tr>
  <td>DST_ALPHA</td>
  <td>&nbsp;</td>
 </tr>
</table>

<table>
 <tr>
  <th align="left"><a name="wiki-CULL_FACE_SIDE_ENUM"></a><b>CULL_FACE_SIDE_ENUM</b></th><th></th>
 </tr>
 <tr>
  <td>BACK</td>
  <td>Cull back-facing polygons.</td>
 </tr>
 <tr>
  <td>FRONT</td>
  <td>Cull front-facing polygons.</td>
 </tr>
 <tr>
  <td>FRONT_AND_BACK</td>
  <td>Cull front and back-facing polygons.</td>
 </tr>
</table>

<table>
 <tr>
  <th align="left"><a name="wiki-FUNC_ENUM"></a><b>FUNC_ENUM</b></th>
  <th></th>
 </tr>
 <tr>
  <td>NEVER</td>
  <td>ALWAYS</td>
 </tr>
 <tr>
  <td>LESS</td>
  <td>GREATER</td>
 </tr>
 <tr>
  <td>EQUAL</td>
  <td>NOTEQUAL</td>
 </tr>
 <tr>
  <td>LEQUAL</td>
  <td>GEQUAL</td>
 </tr>
</table>

<table>
 <tr>
  <th align="left"><a name="wiki-STENCIL_OP_ENUM"></a><b>STENCIL_OPERATION_ENUM</b></th>
  <th></th>
 </tr>
 <tr>
  <td>KEEP</td>
  <td>REPLACE</td>
 </tr>
 <tr>
  <td>ZERO</td>
  <td>INVERT</td>
 </tr>
 <tr>
  <td>INCR</td>
  <td>DECR</td>
 </tr>
 <tr>
  <td>INCR_WRAP</td>
  <td>DECR_WRAP</td>
 </tr>
</table>

<p><strong>Types</strong>:</p>
<ul>
 <li class=MsoNormal><a name=scalar><span class=Non-literalCode>scalar</span> </a>is
     float, int or bool.</li>
 <li class=MsoNormal><a name=vector><span class=Non-literalCode>vector</span></a><span
     class=Non-literalCode> </span>is a comma separated list of floats.</li>
</ul>

<h2 id="predefined-uniforms">Predefined uniforms</h2>
<p>The following are predefined uniforms used by Cocos2d-x that can be used in
your shaders:</p>
<ul>
<li><code>CC_PMatrix</code>: A <code>mat4</code> with the projection matrix</li>
<li><code>CC_MVMatrix</code>: A <code>mat4</code> with the Model View matrix</li>
<li><code>CC_MVPMatrix</code>: A <code>mat4</code> with the Model View Projection matrix</li>
<li><code>CC_NormalMatrix</code>: A <code>mat4</code> with Normal Matrix</li>
<li><code>CC_Time</code>: a <code>vec4</code> with the elapsed time since the game was started</li>
<li>CC_Time[0] = time / 10;</li>
<li>CC_Time[1] = time;</li>
<li>CC_Time[2] = time * 2;</li>
<li>CC_Time[3] = time * 4;</li>
<li><code>CC_SinTime</code>: a <code>vec4</code> with the elapsed time since the game was started:</li>
<li>CC_SinTime[0] = time / 8;</li>
<li>CC_SinTime[1] = time / 4;</li>
<li>CC_SinTime[2] = time / 2;</li>
<li>CC_SinTime[3] = sinf(time);</li>
<li><code>CC_CosTime</code>: a <code>vec4</code> with the elapsed time since the game was started:</li>
<li>CC_CosTime[0] = time / 8;</li>
<li>CC_CosTime[1] = time / 4;</li>
<li>CC_CosTime[2] = time / 2;</li>
<li>CC_CosTime[3] = cosf(time);</li>
<li><code>CC_Random01</code>: A <code>vec4</code> with four random numbers between 0.0f and 1.0f</li>
<li><code>CC_Texture0</code>: A <code>sampler2D</code></li>
<li><code>CC_Texture1</code>: A <code>sampler2D</code></li>
<li><code>CC_Texture2</code>: A <code>sampler2D</code></li>
<li><code>CC_Texture3</code>: A <code>sampler2D</code></li>
</ul>
<h1 id="how-to-optimize-the-graphics-performance-of-your-cocos2d-x-games">How to optimize the graphics performance of your Cocos2d-x games</h1>
<h2 id="golden-rules">Golden rules</h2>
<h3 id="know-the-bottlenecks-and-optimize-the-bottlenecks">Know the bottlenecks and optimize the bottlenecks.</h3>
<p>When doing optimization, we should always stick to this rule. Only 20% code in your system contribute to the 80% performance issue.</p>
<h3 id="always-use-tools-to-profile-the-bottleneck-dont-guess-randomly">Always use tools to profile the bottleneck, don't guess randomly.</h3>
<p>There are many tools available now for profiling the graphics performance.
Though we are optimize the performance of Android games, but XCode could also be helpful to debugging.</p>
<ul>
<li>Xcode: https://github.com/rstrahl/rudistrahl.me/blob/master/entries/Debugging-OpenGL-ES-With-Xcode-Profile-Tools.md
and the official document: https://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/ToolsOverview/ToolsOverview.html</li>
</ul>
<p>There are three major mobile GPU vendors nowadays and they provide decent graphics profiling tools:</p>
<ul>
<li>For ARM Mali GPU: http://malideveloper.arm.com/resources/tools/mali-graphics-debugger/</li>
<li>For Imagination PowerVR GPU: https://community.imgtec.com/developers/powervr/tools/pvrtune/</li>
<li>For Qualcomm Adreno GPU: https://developer.qualcomm.com/software/adreno-gpu-profiler</li>
</ul>
<p>Use these tools when you suffer from graphics issues. <strong>But not at the first beginning, usually the bottleneck resides on CPU.</strong></p>
<h3 id="know-your-target-device-and-your-game-engine">Know your target device and your game engine</h3>
<p>Know the CPU/GPU family of your target device  which is important when sometimes the performance issues
only occurs on certain kind of devices. And you will find they share the same kind of GPU(ARM or PowerVR or Mali).</p>
<p>Know the limitations of your currently used game engine is also important. If you know how your engine organize the graphics command,
how your engine do batch drawing. You could avoid many common pitfalls during coding.</p>
<h3 id="the-principle-of-good-enough">The principle of "Good enough".</h3>
<p>(“If the viewer cannot tell the difference between differently rendered images always use the cheaper implementation".)
As we know a PNG with RGBA444 pixel format has lower graphics quality than the one with RGBA888 pixel format.
But if we can't tell the difference between the two, we should stick to RGBA4444 pixel format.
The RGBA444 format use less memory and it will less likely to cause the memory issue and bandwidth issue.</p>
<p>It is the same goes for the audio sample rate.</p>
<h2 id="common-bottlenecks">Common Bottlenecks</h2>
<p>As a rules of thumb, your game will suffer CPU bottlenecks easily than graphics bottlenecks.</p>
<h3 id="the-cpu-is-often-limited-by-the-number-of-draw-calls-and-the-heavy-compute-operations-in-your-game-loop">The CPU is often limited by the number of draw calls and the heavy compute operations in your game loop</h3>
<p>Try to minimize the total draw calls of your game. We should use batch draw as much as possible.
Cocos2d-x 3.x has auto batch support, but it needs some effort to make it work.</p>
<p>Also try avoid IO operations when players are playing your game. Try to preload your spritesheets, audios, TTF fonts etc.</p>
<p>Also don't do heavy compute operations in your game loop which means don't let the heavy operations called 60 times per frame.</p>
<p>Never!</p>
<h3 id="the-gpu-is-often-limited-by-the-overdrawfillrate-and-bandwidth">The GPU is often limited by the overdraw(fillrate) and bandwidth.</h3>
<p>If you are creating a 2D game and you don't write complex shaders, you might won't suffer GPU issues.
But the overdraw problem still has trouble and it will slow your graphics performance with too much bandwidth consumption.</p>
<p>Though modern mobile GPU have TBDR(Tiled-based Defered Rendering) architecture, but only PowerVR's HSR(Hidden Surface Removal)
could reduce the overdraw problem significantly. Other GPU vendors only implement a TBDR + early-z testing, it only reduce the overdraw
problem when you submit your opaque geometry with the order(font to back). And Cocos2d-x always submit rendering commands ordered from back to front.
Because in 2D, we might have many transparency images and only in this order the blending effect is correct.</p>
<p>Note: By using poly triangles, we could improve the fillrate.  Please refer to this article for more information:
https://www.codeandweb.com/texturepacker/tutorials/cocos2d-x-performance-optimization</p>
<p>But don't worry too much of this issue, it doesn't perform too bad in practice.</p>
<h2 id="simple-checklist-to-make-your-cocos2d-x-game-faster">Simple checklist to make your Cocos2d-x game faster</h2>
<ol>
<li>Always use batch drawing. Package sprite images in the same layer into a large atlas(Texture packer could help).</li>
<li>As rule of thumb, try to keep your draw call below 50. In other words, try to minimize your draw call number.</li>
<li>Prefer 16bit(RGBA4444+dithering) over raw 32bit(RGBA8888) textures.</li>
<li>Use compressed textures: In iOS use PVRTC texture. In Android platform, use ETC1. but ETC1 doesn't has alpha,
you might need to write a custom shader and provide a separate ETC1 image for the alpha channel.</li>
<li>Don't use system font as your game score counter. It's slow. Try to use TTF or BMFont, BMfont is better.</li>
<li>Try to preload audio and other game objects before usage.</li>
<li>Use armeabi-v7a to build Android native code and it will enable neon instructors which is very fast.</li>
<li>Bake the lighting rather than using the dynamic light.</li>
<li>Avoid using complex pixel shaders.</li>
<li>Avoid using <strong>discard</strong> and alpha test in your pixel shader, it will break the HSR(Hidden surface removal). Only use it when necessary.</li>
</ol>
<!--
## Best Practice - Optimization, memory, performance, profiling

## SQLite

## Subclass Cocos2d-x classes

## Data structures (i.e Vector)

## Custom OpenGL (what to cover here? CustomCommand?)

## c++11 usage

## rendering pipeline (notes about this in the wiki)
-->

<!-- previous/next buttons for everything but the home page -->

<ul class="nav navbar-nav navbar-right">
    
        <li >
            <a rel="next" href="../vr/index.html">
                <i class="fa fa-arrow-left"></i> Previous
            </a>
        </li>
        <li >
            <a rel="prev" href="../../editors_and_tools/cocosCLTool/index.html">
                Next <i class="fa fa-arrow-right"></i>
            </a>
        </li>
    
</ul>
</div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p style="text-align:center">Copyright (c) 2014-2016 Chukong Technologies Inc.</p>
            
           <!-- <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>-->
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>

        <!-- PG languages -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
        <script>
        $(function() {
          var key = "Cocos2d-x_pg_lang";
          var switch_lang = function(l) {
              $('.langs li a').removeClass('selected');
              $('#'+l).addClass('selected');
              $('.tab_content').hide();
              $('.'+l).show();
              $.cookie(key, l);
          }
          $('.langs li a').click(function() {switch_lang(this.id);return false;});
          var c = $.cookie(key);
          if (typeof c == 'undefined') c='tab-cpp';
          switch_lang(c);
        });
        </script>

        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/Cocos2d-html5-min.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chipmunk.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/cocos2d-jsb.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/cocos2d.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/main.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/AnimationLayer.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/BackgroundLayer.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/Coin.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/GameOverLayer.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/PlayScene.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/Rock.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/SimpleRecognizer.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/StatusLayer.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/globals.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/myApp.js"></script>
        <script src="../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/resource.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
