<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="The Cocos Team">
        <link rel="canonical" href="http://cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/events/index.html">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">

	<title>_Events - Cocos Documentation</title>

  <link href="../../../../css/bootstrap-custom.css" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
<link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
<link href="../../../../css/base.css" rel="stylesheet">
<link href="../../../../css/cinder.css" rel="stylesheet">
<link href="../../../../css/pg.css" rel="stylesheet">
<link href="../../../../css/highlight.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-3216502-3', 'Cocos2d-x.org');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a style="padding: 12px 0px;" class="navbar-brand" href="../../../../index.html">Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../../../index.html">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Manual Installations</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../../installation/A/index.html">Prerequisites</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Android-terminal/index.html">Android Command-line Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Android-VisualStudio/index.html">Android Visual Studio Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Android-Studio/index.html">Android Studio Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Android-Eclipse/index.html">Android Eclipse Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/iOS/index.html">IOS and OSX Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Linux/index.html">Linux Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Tizen/index.html">Tizen Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Windows/index.html">Windows Setup</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../installation/Windows-Phone/index.html">Windows Phone Setup</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Programmers Guide</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../../programmers-guide/about/index.html">About Cocos2d-x</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/basic_concepts/index.html">Basic Concepts</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/sprites/index.html">Sprites</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/actions/index.html">Actions</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/scenes/index.html">Scenes</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/ui_components/index.html">UI</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/other_node_types/index.html">Other Node Types</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/event_dispatch/index.html">Event Dispatch</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/3d/index.html">3D</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/scripting/index.html">Scripting</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/physics/index.html">Physics</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/audio/index.html">Audio</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/vr/index.html">VR</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../../programmers-guide/advanced_topics/index.html">Advanced Topics</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Editors & Tools</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../cocosCLTool/index.html">Command-line tool</a>
  </li>
  

          
              
  
  <li >
      <a href="../../../creator/index.html">Cocos Creator</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
  
  <li >
      <a href="../../../cocos/index.html">Cocos Launcher</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Services</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../../services/sdkbox/index.html">SDKBOX</a>
  </li>
  

          
      </ul>
    </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Tutorials</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../../tutorials/javascript/javascript/index.html">Parkour Game Tutorials for Cocos2d-JS</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
      </ul>
    </li>
  

                        
                            
  
  <li >
      <a href="../../../../api-ref/index.html">API Reference</a>
  </li>
  

                        
                            
  
    <li class="dropdown-submenu">
      <a tabindex="-1" class="non-link">Deprecated</a>
      <ul class="dropdown-menu">
          
              
  
  <li >
      <a href="../../../../deprecated/studio/index.html">Cocos Studio</a>
  </li>
  

          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
              
          
      </ul>
    </li>
  

                        
                        </ul>
                    </li>
                
                

                <!-- new add for language button -->
                <!--<li>
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>-->

                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <!-- 
                    <li >
                        <a rel="next" href="../create-destroy/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../internal-events/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                 -->
                
                    <li>
                        <a href="https://github.com/chukong/cocos-docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
              
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
      
        
          <li class="main active"><a href="#listen-to-and-launch-events">Listen to and launch events</a></li>

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#listen-to-events">Listen to events</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#launch-event">Launch event</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#event-delivery">Event delivery</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#event-object">Event object</a></li>
              

          

              <!-- slackmoehrle 2/1/2016 - added this so we can build docs but not be in menus -->
              
                <li><a href="#system-built-in-event">System built-in event</a></li>
              

          

        
      
    
    </ul>
</div></div>
              
                <div class="col-md-9" role="main">

<!-- bread crumb trail -->
<ol class="breadcrumb">
<li><a href="../../../../index.html">Docs</a></li>

  
    
      <li>Contents</li>
    
  
    
      <li>Editors & Tools</li>
    
  

<li>_Events</li>
</ol>

<!-- previous/next buttons for everything but the home page -->

<ul class="nav navbar-nav navbar-right">
    
        <li >
            <a rel="next" href="../create-destroy/index.html">
                <i class="fa fa-arrow-left"></i> Previous
            </a>
        </li>
        <li >
            <a rel="prev" href="../internal-events/index.html">
                Next <i class="fa fa-arrow-right"></i>
            </a>
        </li>
    
</ul>


<!-- we can put this here if we want it on all content pages, but we don't at this point -->
<!--<div class="langs">
  <ul>
    <li><a href="#" id="tab-cpp">C++</a></li>
    <li><a href="#" id="tab-js">Javascript</a></li>-->
    <!--<li><a href="#" id="tab-lua">Lua</a></li>-->
  <!--</ul>
</div>-->

<h1 id="listen-to-and-launch-events">Listen to and launch events</h1>
<h2 id="listen-to-events">Listen to events</h2>
<p>Even processing is done in the <code>cc.Node</code>. Components can register and monitor events by visiting the node <code>this.node</code>. Listen to events
can be registered by the function <code>this.node.on()</code>. The methods are as follows:</p>
<pre><code class="javascript">cc.Class({
  extends: cc.Component,

  properties: {
  },

  onLoad: function () {
    this.node.on('mousedown', function ( event ) {
      console.log('Hello!');
    });
  },
});
</code></pre>

<p>What's worth mentioning is that the event listener function <code>on</code> can pass to the third parameter target to bind the caller of the response function. The following two calling methods
have the same effect:</p>
<pre><code class="javascript">// bind using the function
this.node.on('mousedown', function ( event ) {
  this.enabled = false;
}.bind(this));

// use the third parameter
this.node.on('mousedown', function (event) {
  this.enabled = false;
}, this);
</code></pre>

<p>Besides listening with <code>on</code>, we can also use the <code>once</code> method. The <code>once</code> listener will shut the event being listened to after the listener function responds.</p>
<h3 id="shut-listener">Shut listener</h3>
<p>We can shut the corresponding event listener using <code>off</code> when we don't care about a certain event anymore. One thing to note is that the parameter of
<code>off</code> must be in one-to-one correspondence with the parameter of <code>on</code> in order to shut it.</p>
<p>Below are what we recommend you to put in:</p>
<pre><code class="javascript">cc.Class({
  extends: cc.Component,

  _sayHello: function () {
    console.log('Hello World');
  },

  onEnable: function () {
    this.node.on('foobar', this._sayHello, this);
  },

  onDisable: function () {
    this.node.off('foobar', this._sayHello, this);
  },
});
</code></pre>

<h2 id="launch-event">Launch event</h2>
<p>We can launch an event using two ways: <code>emit</code> and <code>dispatchEvent</code>. The difference between these two is that the latter can do the event delivery.
Let's get to know the <code>emit</code> event through a simple example：</p>
<pre><code class="javascript">cc.Class({
  extends: cc.Component,

  onLoad: function () {
    this.node.on('say-hello', function (event) {
      console.log(event.detail.msg);
    });
  },

  start: function () {
    this.node.emit('say-hello', {
      msg: 'Hello, this is Cocos Creator',
    });
  },
});
</code></pre>

<h2 id="event-delivery">Event delivery</h2>
<p>Events launched by the <code>dispatchEvent</code> method mentioned above would enter the event delivery stage. In Cocos Creator's
event delivery system, we use bubble delivery. Bubble delivery will pass the event from the initiating node continually on to its parent node
until it gets to the root node or is interruptedly processed by <code>event.stopPropagation()</code> in the response function of some node.</p>
<p><img alt="bubble-event" src="../assets/bubble-event.png" /></p>
<p>As shown in the picture above, when we send the event “foobar” from node c, if both node a and b listen to the event“foobar”,
the event will pass to node b and a from c. For example:</p>
<pre><code class="javascript">// In the component script of node c
this.node.dispatchEvent( new cc.Event('foobar', true) );
</code></pre>

<p>If we want to stop the event delivery after node b intercepts the event, we can call the function <code>event.stopPropagation()</code>
to do this. Detailed methods are as follows:</p>
<pre><code class="javascript">// In the component script of node b
this.node.on('foobar', function (event) {
  event.stopPropagation();
});
</code></pre>

<h2 id="event-object">Event object</h2>
<p>In the call-back of the event listener, the developer will receive an event object <code>event</code> of the <code>cc.Event</code> type. <code>stopPropagation</code> is the standard API of <code>cc.Event</code>, other important API include:</p>
<table>
<thead>
<tr>
<th>API name</th>
<th align="center">type</th>
<th align="center">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td align="center"><code>String</code></td>
<td align="center">type of the event (event name)</td>
</tr>
<tr>
<td><code>target</code></td>
<td align="center"><code>cc.Node</code></td>
<td align="center">primary object received by the event</td>
</tr>
<tr>
<td><code>currentTarget</code></td>
<td align="center"><code>cc.Node</code></td>
<td align="center">current object receiving the event; current object of the event in the bubble stage may be different from the primary object</td>
</tr>
<tr>
<td><code>getType</code></td>
<td align="center"><code>Funciton</code></td>
<td align="center">get the type of the event</td>
</tr>
<tr>
<td><code>stopPropagation</code></td>
<td align="center"><code>Function</code></td>
<td align="center">stop the bubble stage, the event will no longer pass on to the parent node while the rest of the listeners of the current node will still receive the event</td>
</tr>
<tr>
<td><code>stopPropagationImmediate</code></td>
<td align="center"><code>Function</code></td>
<td align="center">stop delivering the event. The event will not pass on to the parent node and the rest of the listeners of the current node</td>
</tr>
<tr>
<td><code>getCurrentTarget</code></td>
<td align="center"><code>Function</code></td>
<td align="center">get the target node that is currently receiving the event</td>
</tr>
<tr>
<td><code>detail</code></td>
<td align="center"><code>Function</code></td>
<td align="center">custom event information（belongs to <code>cc.Event.EventCustom</code>）</td>
</tr>
<tr>
<td><code>setUserData</code></td>
<td align="center"><code>Function</code></td>
<td align="center">set custom event information（belongs to <code>cc.Event.EventCustom</code>）</td>
</tr>
<tr>
<td><code>getUserData</code></td>
<td align="center"><code>Function</code></td>
<td align="center">get custom event information（belongs to <code>cc.Event.EventCustom</code>）</td>
</tr>
</tbody>
</table>
<p>You can refer to the <code>cc.Event</code> and API files of its child category for a complete API list.</p>
<h2 id="system-built-in-event">System built-in event</h2>
<p>Above are the general rules for listening to the event and launching the event. Cocos Creator has built in system events like mouse and touch for <code>cc.Node</code>. You can refer to <a href="../internal-events/index.html">Internal Events</a>.</p>

<!-- previous/next buttons for everything but the home page -->

<ul class="nav navbar-nav navbar-right">
    
        <li >
            <a rel="next" href="../create-destroy/index.html">
                <i class="fa fa-arrow-left"></i> Previous
            </a>
        </li>
        <li >
            <a rel="prev" href="../internal-events/index.html">
                Next <i class="fa fa-arrow-right"></i>
            </a>
        </li>
    
</ul>
</div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p style="text-align:center">Copyright (c) 2014-2016 Chukong Technologies Inc.</p>
            
           <!-- <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>-->
        </footer>

        <script src="../../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../../..';</script>

        <!-- PG languages -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
        <script>
        $(function() {
          var key = "Cocos2d-x_pg_lang";
          var switch_lang = function(l) {
              $('.langs li a').removeClass('selected');
              $('#'+l).addClass('selected');
              $('.tab_content').hide();
              $('.'+l).show();
              $.cookie(key, l);
          }
          $('.langs li a').click(function() {switch_lang(this.id);return false;});
          var c = $.cookie(key);
          if (typeof c == 'undefined') c='tab-cpp';
          switch_lang(c);
        });
        </script>

        <script data-main="../../../../mkdocs/js/search.js" src="../../../../mkdocs/js/require.js"></script>
        <script src="../../../../js/base.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/Cocos2d-html5-min.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chipmunk.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/cocos2d-jsb.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/cocos2d.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/main.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/AnimationLayer.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/BackgroundLayer.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/Coin.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/GameOverLayer.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/PlayScene.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/Rock.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/SimpleRecognizer.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/StatusLayer.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/globals.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/myApp.js"></script>
        <script src="../../../../tutorials/javascript/parkour-game-with-javascript/chapter10/code/src/resource.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
